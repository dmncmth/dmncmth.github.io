<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Team Infosec - Who is On Shift?</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    :root {
      --s1: #4fc3f7;
      --s2: #ffb74d;
      --s3: #81c784;
      --off: #e0e0e0;
      --bg: linear-gradient(120deg, #1e3c72 0%, #2a5298 100%);
      --card: #fff;
      --accent: #00bcd4;
      --shadow: 0 4px 16px #0002;
    }
    body {
      font-family: 'Segoe UI', Arial, sans-serif;
      background: var(--bg);
      margin: 0;
      min-height: 100vh;
      color: #1a237e;
    }
    .container {
      max-width: 600px;
      margin: 40px auto;
      background: var(--card);
      border-radius: 18px;
      box-shadow: var(--shadow);
      padding: 32px 24px 24px 24px;
    }
    h1 {
      text-align: center;
      font-size: 2.1em;
      letter-spacing: 2px;
      margin-bottom: 0.2em;
      color: var(--accent);
      text-shadow: 0 2px 8px #0001;
    }
    h2 {
      text-align: center;
      font-weight: 400;
      color: #3949ab;
      margin-top: 0;
    }
    .shift-card {
      background: linear-gradient(90deg, #e3f2fd 60%, #fce4ec 100%);
      border-radius: 12px;
      padding: 20px 18px;
      margin-bottom: 22px;
      box-shadow: 0 2px 8px #0001;
      text-align: center;
    }
    .shift-list {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 18px;
      margin: 16px 0 0 0;
      padding: 0;
      list-style: none;
    }
    .shift-badge {
      display: inline-block;
      font-size: 1.1em;
      font-weight: bold;
      padding: 10px 20px;
      border-radius: 30px;
      color: #fff;
      box-shadow: 0 2px 8px #0001;
      margin: 2px 0;
      letter-spacing: 1px;
      min-width: 110px;
      text-align: center;
      transition: transform 0.2s;
    }
    .shift-s1 { background: var(--s1); }
    .shift-s2 { background: var(--s2); }
    .shift-s3 { background: var(--s3); }
    .shift-off { background: var(--off); color: #757575; }
    .no-shift {
      color: #b71c1c;
      font-weight: bold;
      font-size: 1.1em;
      margin-top: 10px;
    }
    .input-row {
      display: flex;
      gap: 12px;
      justify-content: center;
      align-items: center;
      margin: 12px 0;
    }
    .input-row input, .input-row button {
      font-size: 1em;
      padding: 7px 12px;
      border-radius: 6px;
      border: 1px solid #bdbdbd;
      outline: none;
    }
    .input-row button {
      background: var(--accent);
      color: #fff;
      font-weight: bold;
      border: none;
      cursor: pointer;
      transition: background 0.2s;
    }
    .input-row button:hover {
      background: #008c9e;
    }
    details {
      margin-top: 28px;
      background: #f5f5f5;
      border-radius: 10px;
      padding: 12px 18px;
      box-shadow: 0 1px 4px #0001;
    }
    summary {
      font-weight: bold;
      color: #1976d2;
      font-size: 1.1em;
      cursor: pointer;
      outline: none;
    }
    table {
      border-collapse: collapse;
      width: 100%;
      margin-top: 14px;
      background: #fff;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 2px 8px #0001;
    }
    th, td {
      border: 1px solid #e0e0e0;
      padding: 7px 10px;
      text-align: center;
      font-size: 1em;
    }
    th {
      background: #e3f2fd;
      color: #1976d2;
    }
    td.shift-s1 { background: #e3f2fd; color: #1976d2; }
    td.shift-s2 { background: #fff3e0; color: #ef6c00; }
    td.shift-s3 { background: #e8f5e9; color: #388e3c; }
    td.shift-off { background: #f5f5f5; color: #aaa; }
    @media (max-width: 700px) {
      .container { padding: 12px 2vw 16px 2vw; }
      h1 { font-size: 1.3em; }
      .shift-card { padding: 12px 4vw; }
      table, th, td { font-size: 0.95em; }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Team Infosec</h1>
    <h2>Who is On Shift?</h2>

    <div class="shift-card">
      <b>Current Shift:</b>
      <div id="currentShiftResult"></div>
    </div>

    <div class="shift-card">
      <b>Check Shift for Any Date and Time:</b>
      <div class="input-row">
        <input type="date" id="dateInput">
        <input type="time" id="timeInput" step="60">
        <button onclick="checkCustomShift()">Check</button>
      </div>
      <div id="customShiftResult"></div>
    </div>

    <details>
      <summary>Show Full Shift Timetable</summary>
      <div id="timetable"></div>
    </details>
  </div>

  <script>
    // Shift time definitions (24h format)
    const shifts = {
      S1: { start: "07:30", end: "15:30" },
      S2: { start: "13:30", end: "22:00" },
      S3: { start: "21:30", end: "08:00" } // overnight
    };

    // Team members
    const team = ["Ashwin", "Dominic", "Hari", "Ashrith", "Manu"];

    // Shift table: update as needed
    // Each date: { Name: "S1"/"S2"/"S3"/"OFF" }
    const shiftTable = {
      "2025-06-01": { Ashwin: "S2", Dominic: "S3", Hari: "OFF", Ashrith: "OFF", Manu: "OFF" },
      "2025-06-02": { Ashwin: "OFF", Dominic: "OFF", Hari: "S1", Ashrith: "OFF", Manu: "OFF" },
      // Add more dates as needed
    };

    // Helper: pad number
    function pad(n) { return n < 10 ? '0' + n : n; }

    // Returns array of {name, shift} for all people on shift at given date/time
    function getMembersOnShift(dateObj) {
      const y = dateObj.getFullYear();
      const m = pad(dateObj.getMonth() + 1);
      const d = pad(dateObj.getDate());
      const dateStr = `${y}-${m}-${d}`;
      const mins = dateObj.getHours() * 60 + dateObj.getMinutes();

      let members = [];

      // --- S1 and S2: check today's assignment ---
      const today = shiftTable[dateStr];
      if (today) {
        // S1
        let s1Start = 7 * 60 + 30, s1End = 15 * 60 + 30;
        if (mins >= s1Start && mins < s1End) {
          for (const member of team) {
            if (today[member] === "S1") members.push({ name: member, shift: "S1" });
          }
        }
        // S2
        let s2Start = 13 * 60 + 30, s2End = 22 * 60;
        if (mins >= s2Start && mins < s2End) {
          for (const member of team) {
            if (today[member] === "S2") members.push({ name: member, shift: "S2" });
          }
        }
      }

      // --- S3: check both today's and previous day's S3 assignment ---
      // S3 runs 21:30–08:00 (overnight)
      // If time is between 00:00–08:00, S3 is from previous day
      // If time is between 21:30–23:59, S3 is today
      let s3Start = 21 * 60 + 30, s3End = 8 * 60; // 1290, 480
      if (mins < s3End) {
        // After midnight, before 08:00: get previous day's S3
        let prev = new Date(dateObj.getTime() - 24 * 60 * 60 * 1000);
        const py = prev.getFullYear(), pm = pad(prev.getMonth() + 1), pd = pad(prev.getDate());
        const prevDateStr = `${py}-${pm}-${pd}`;
        const prevDay = shiftTable[prevDateStr];
        if (prevDay) {
          for (const member of team) {
            if (prevDay[member] === "S3" && !members.find(m => m.name === member)) {
              members.push({ name: member, shift: "S3" });
            }
          }
        }
      } else if (mins >= s3Start) {
        // After 21:30: get today's S3
        if (today) {
          for (const member of team) {
            if (today[member] === "S3" && !members.find(m => m.name === member)) {
              members.push({ name: member, shift: "S3" });
            }
          }
        }
      }

      return members;
    }

    // Display who is on shift now
    function showCurrentShift() {
      const now = new Date();
      const members = getMembersOnShift(now);
      const resDiv = document.getElementById("currentShiftResult");
      if (members.length === 0) {
        resDiv.innerHTML = "<div class='no-shift'>No one is on shift right now.</div>";
      } else {
        resDiv.innerHTML =
          `<ul class="shift-list">${members.map(m =>
            `<li><span class="shift-badge shift-${m.shift.toLowerCase()}">${m.name} (${m.shift})</span></li>`
          ).join("")}</ul>`;
      }
    }

    // For custom date/time input
    function checkCustomShift() {
      const dateVal = document.getElementById("dateInput").value;
      const timeVal = document.getElementById("timeInput").value;
      if (!dateVal || !timeVal) {
        document.getElementById("customShiftResult").innerHTML =
          "<div class='no-shift'>Please select both date and time.</div>";
        return;
      }
      const dateObj = new Date(dateVal + "T" + timeVal + ":00");
      const members = getMembersOnShift(dateObj);
      if (members.length === 0) {
        document.getElementById("customShiftResult").innerHTML =
          "<div class='no-shift'>No one is on shift at this time.</div>";
      } else {
        document.getElementById("customShiftResult").innerHTML =
          `<ul class="shift-list">${members.map(m =>
            `<li><span class="shift-badge shift-${m.shift.toLowerCase()}">${m.name} (${m.shift})</span></li>`
          ).join("")}</ul>`;
      }
    }

    // Render timetable as table
    function renderTimetable() {
      let html = '<table><tr><th>Date</th>';
      for (const m of team) html += `<th>${m}</th>`;
      html += '</tr>';
      for (const [date, shiftsObj] of Object.entries(shiftTable)) {
        html += `<tr><td>${date}</td>`;
        for (const m of team) {
          const shift = shiftsObj[m] || "OFF";
          html += `<td class="shift-${shift.toLowerCase()}">${shift}</td>`;
        }
        html += '</tr>';
      }
      html += '</table>';
      document.getElementById("timetable").innerHTML = html;
    }

    // On page load
    showCurrentShift();
    renderTimetable();

    // Optional: auto-refresh current shift every minute
    setInterval(showCurrentShift, 60000);
  </script>
</body>
</html>
